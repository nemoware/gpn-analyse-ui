<div class="row" *ngIf="document">
  <div class="col-3 mat-elevation-z8" >
    <mat-tab-group color="accent">

      <mat-tab label="Детали">
        <div style="margin-left: 10px">
          <span><b>{{ document.audit.subsidiaryName }}</b> {{ document.audit.auditStart | date :'dd.MM.yyyy'}} - {{document.audit.auditEnd | date : 'dd.MM.yyyy'}}</span>
          <br>
          <fa-icon *ngIf="this.document.audit.status == 'InWork'" [icon]="faClock" style="float: left"></fa-icon>
          <fa-icon *ngIf="this.document.audit.status == 'Ended'" [icon]="faFlagCheckered" style="float: left"></fa-icon>
          <span style="margin-left: 10px"> Статус: {{ document.audit.status | translate}} </span>
          <mat-divider></mat-divider>
          <span><b>Файл: {{ document.filename }}</b></span>
          <mat-divider></mat-divider>
          <label>Время анализа</label><br>
          <span>{{ document.analysis.analyze_timestamp | date :'dd.MM.yyyy HH:mm'}}</span>
          <mat-divider></mat-divider>
          <label>Уверенность анализа</label><br>
          <span>100%</span>
          <mat-divider></mat-divider>
          <div *ngIf="document.user">
            <label><b>Корректировка</b></label><br>
            <label>Дата: </label> <span> {{ document.user.updateDate | date:'dd.MM.yyyy' }} </span><br>
            <label>Пользователь: </label> <span> {{ document.user.author.login }} </span>
            <mat-divider></mat-divider>
          </div>
          <label>Связанные документы</label>
        </div>
      </mat-tab>

      <mat-tab label="Фрагменты">
        <cdk-virtual-scroll-viewport  style="height: 80vh" itemSize="50" >
        <gpn-tree-attributes
          [editmode]="editmode"
          [attributes]="attributes"
          [headers]="document.analysis.headers"
          [documentType] = "documentType"
          (goToAttribute)="goToAttribute($event)"
        ></gpn-tree-attributes>
      </cdk-virtual-scroll-viewport>
      </mat-tab>

    </mat-tab-group>
  </div>
  <div class="col-9" style="height: 88vh" >
    <gpn-view-document
      [document]="document"
      [documentType] = "documentType"
      [editmode]="editmode"
      [attributes] = "attributes"
      (changeAttribute)= "changeAttribute($event)"
      (refresh)="refresh()"
    ></gpn-view-document>
  </div>
</div>
